<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://unpkg.com/react@17/umd/react.development.js"
        crossorigin></script>
        <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
        crossorigin></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <link rel="stylesheet" href="notepad.css">
    </head>
    <body>
        <div id="root"></div>
        <script type="text/babel">
            let new_id = 0
            const { useState, useRef } = React

            function Notepad() {
                const [notes, setNotes] = useState([])
                const newText = useRef()

                function deleteNote(id){
                    const currNotes = [...notes]
                    setNotes(currNotes.filter(note => !(note.id === id)))
                    
                }

                function changeColor(id, color){
                    const noteChange = currNotes.find(note => note.id ===  id)
                    noteChange.style.backgroundColor = color
                }


                function addNote(){
                    const text = newText.current.value
                    if (text == "") {
                        alert("Please enter some text")
                        return
                    }
                    setNotes(prevNotes => {
                        return [...prevNotes, {id: new_id, name: text}]
                    })
                    newText.current.value = null
                    new_id = new_id + 1
                        
                }

                return(
                    <div id="main">
                        <div id="input">
                            <input ref={newText} type="text" id="entry" name="entry" />
                            <button onClick={addNote} id="add">Add</button>
                        </div>
                        <Notes notes = {notes} deleteNote = {deleteNote}/>
                    </div>
                )


            }
            function Notes( {notes, deleteNote} ) {
                return (
                        notes.map(note => {
                            return <Note key={note.id} deleteNote = {deleteNote} note = {note} />
                        })
                )
            }

            function Note( {note, deleteNote} ) {

                function handleDelete(){
                    deleteNote(note.id)
                }

                return(
                    <div className="note">
                        <p id="note-text">{note.name}</p>
                        <div id="buttons">
                            <button onClick={handleDelete}>Delete</button>
                            <button onClick={handleColor("red")}>Red</button>
                            <button onClick={handleColor("blue")}>Blue</button>
                            <button onClick={handleColor("green")}>Green</button>
                            <button>Edit</button>
                        </div>
                    </div>
                )
            }
        
            ReactDOM.render(<Notepad />, document.getElementById("root"))
        </script>
    </body>
</html>

